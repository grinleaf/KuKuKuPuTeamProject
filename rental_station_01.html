<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <!-- Swiper : 스와이프 가능한 반응형 슬라이더 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./css/rental_station_top.css">
    
      <!-- index.html용 style -->
      <link rel="stylesheet" href="./index.css">

      

      <script>
          function afterload(){
              //로그인 여부에 따른 UI 적용
              //로그인 안돼있으면 로그인정보창, 돼있으면 로그인입력창 안 띄우기
              let isLogin = false
              const topNavLogin = document.getElementById("top-nav-login")
              const topNavSignUp = document.getElementById("top-nav-signup")
              const topNavMypage = document.getElementById("top-nav-mypage")
              const topNavLogout = document.getElementById("top-nav-logout")
              const mTopNavLogin = document.getElementById("m_top-nav-login")
              const mTopNavSignUp = document.getElementById("m_top-nav-signup")
              const mTopNavMypage = document.getElementById("m_top-nav-mypage")
              const mTopNavLogout = document.getElementById("m_top-nav-logout")
  
              const loginForm = document.getElementById("login-form")
              const loggedIn = document.getElementById("loggedin")
  
              if(isLogin == false){ //비로그인 시
                  topNavMypage.style.display = "none"
                  topNavLogout.style.display = "none"
                  mTopNavMypage.style.display = "none"
                  mTopNavLogout.style.display = "none"
  
                  loggedIn.style.display = "none"
              } else { //로그인 시
                  topNavLogin.style.display = "none"
                  topNavSignUp.style.display = "none"
                  mTopNavLogin.style.display = "none"
                  mTopNavSignUp.style.display = "none"
                  
                  loginForm.style.display = "none"
              }
          }
  
          function isTabletWidth(){
              return window.innerWidth < 768
          }
      </script>
  </head>
  <body onload="afterload()">
      <div id="header-wrap">
          <header id="header">
              <div id="top-nav">
                  <a id="top-nav-login" href="./signIn_01.html">로그인</a>
                  <a id="top-nav-signup" href="./signUp1_01.html">회원가입</a>
                  <a id="top-nav-mypage" href="">마이페이지</a>
                  <a id="top-nav-logout" href="">로그아웃</a>
              </div>
          </header>
      </div>
<!-- content 영역 시작 -->
    <!-- 상단 탭 -->
    <div style="border: 1px solid black; width: 100%; height: auto;" class="header">


        <span class="menu_btn">
            <button type="submit" id="btn" style='cursor:pointer;'>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Hamburger_icon.svg/1280px-Hamburger_icon.svg.png"
                    alt="" id="btn_img">
            </button>
        </span>

        <h1 class="img_log">
            <a href="./index.html" class="a">
                <img src="https://www.bikeseoul.com/images/logo.png" alt="서울자전거" id="logo">
            </a>
        </h1>

        <div class="search">
            <input type="text" placeholder="위치를 입력해 주세요" id="input_text">
            <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png" alt="" id="input_img">
        </div>


    </div>

    <!-- 지도영역 -->
    <section>

        <div id="map" class="section" style="width: 100%; height: 680px;"></div>

        <script type="text/javascript"
            src="//dapi.kakao.com/v2/maps/sdk.js?appkey=bb1a68396a7392559ab685f4fee81211"></script>


        <script>

            var container = document.getElementById('map');
            var options = {
                center: new kakao.maps.LatLng(37.5663, 126.9779), //지도의 중심좌표 - 내위치로 바꾸기
                level: 4
            };

            var map = new kakao.maps.Map(container, options);

            var positions = []
            var positions2 = []

            jsonparsing(1, 1000)
            jsonparsing(1001, 2000)
            jsonparsing(2001, 3000)
            
            function jsonparsing(a, b){
                $.ajax({
                type: "GET",
                url: "http://openapi.seoul.go.kr:8088/624c6f426b73757838315a754b6474/json/bikeList/" + a +"/"+b,
                data: {},
                success: function(response){
                    let bike_list = response["rentBikeStatus"]["row"]
                    for (let i = 0; i < bike_list.length; i++){
                        let name_stat = bike_list[i]["stationName"]
                        let lat = bike_list[i]["stationLatitude"]
                        let lng = bike_list[i]["stationLongitude"]

                        positions[i] = 
                            {
                                title: `${name_stat}`,
                                latlng: new kakao.maps.LatLng(`${lat}`, `${lng}`)
                            }
                        

                    }
                    
                    var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

                    for (var i = 0; i < positions.length; i++) {

                        // 마커 이미지의 이미지 크기 입니다
                        var imageSize = new kakao.maps.Size(24, 35);

                        // 마커 이미지를 생성합니다    
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

                        // 마커를 생성합니다
                        var marker = new kakao.maps.Marker({
                            map: map, // 마커를 표시할 지도
                            position: positions[i].latlng, // 마커를 표시할 위치
                            title: positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                            image: markerImage // 마커 이미지 
                        });
                    }

                }
                })
            }
   
            // 마커 이미지의 이미지 주소입니다
           

            var mapTypeControl = new kakao.maps.MapTypeControl();

            // 지도에 컨트롤을 추가해야 지도위에 표시됩니다
            // kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
            map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

            // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
            var zoomControl = new kakao.maps.ZoomControl();
            map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

            marker.setMap(map);

        </script>

    </section>
<!-- content 영역 끝 -->
    <div id="footer-wrap" style="background-color: gainsboro;">
        <footer id="footer">
            <div id="store">
                <img src="./image/app_ios.png" alt="">
                <img src="./image/app_and.png" alt="">
            </div>
            <div id="sns">
                <img src="./image/instaLink.png" alt="">
                <img src="./image/facebookLink.png" alt="">
                <img src="./image/naverblogLink.png" alt="">
            </div>
            <div id="footer-nav">
                <a href="">이용약관</a> | 
                <a href="">개인정보처리방침</a> | 
                <a href="">보험안내</a> | 
                <a href="">도움주신 분</a>
            </div>
            <p>서울특별시 중구 세종대로 110 서울특별시 대표자 오세훈, Tel : 1599-0120 (사업자등록번호 : 104-83-00469) 우편번호 04524</p>
            <p>COPYRIGHT ⓒ 2018 bikeseoul All RIGHTS RESERVED.</p>
        </footer>
    </div>
</body>
</html>